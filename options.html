<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LiveChat Extension - Options</title>
  </head>
  <body>
    <main class="options-shell">
      <section class="options-card">
        <header class="options-header">
          <div class="brand-row">
            <img class="brand-logo" src="icon.png" alt="LiveChat" />
            <p class="options-kicker">LiveChat Extension</p>
          </div>
          <h1>Configuration</h1>
          <p class="options-subtitle">
            Deux chemins possibles: appairage rapide à gauche, réglage manuel à droite.
          </p>
        </header>

        <section class="panels-grid">
          <form id="pairing-form" class="options-form options-panel pairing-panel">
            <div class="panel-head">
              <p class="panel-tag">Rapide</p>
              <h2 class="section-title">Connexion API + Pair code</h2>
              <p class="section-subtitle">
                Renseigne l’URL racine du bot puis colle le code généré par <code>/pair-code</code>.
              </p>
            </div>

            <div class="field-group">
              <label class="field-label" for="api-url">API_URL</label>
              <input id="api-url" class="field-input" type="url" placeholder="https://bot.exemple.com" />
              <p class="api-note">Ne pas mettre <code>/overlay</code> ou <code>/ingest</code> dans l’URL.</p>
              <p id="permission-state" class="permission-state">Autorisation domaine: non configuré.</p>
            </div>

            <div class="field-group">
              <label class="field-label" for="pairing-code">Pair code</label>
              <input id="pairing-code" class="field-input" type="text" placeholder="AB12CD34" required />
              <p class="field-hint">Le nom est généré automatiquement au format <code>Extension-&lt;nom&gt;</code>.</p>
            </div>

            <button id="pair-button" class="btn btn-primary" type="submit">Récupérer la configuration</button>
          </form>

          <form id="options-form" class="options-form options-panel manual-panel">
            <div class="panel-head">
              <p class="panel-tag">Avancé</p>
              <h2 class="section-title">Configuration manuelle</h2>
              <p class="section-subtitle">
                Modifie les champs directement puis sauvegarde.
              </p>
            </div>

            <div class="field-group">
              <label class="field-label" for="api-url-manual">API_URL</label>
              <input id="api-url-manual" class="field-input" type="url" placeholder="https://bot.exemple.com" />
              <p class="field-hint">Ce champ est synchronisé automatiquement avec celui du formulaire de gauche.</p>
            </div>

            <label class="field-label" for="ingest-token">INGEST_API_TOKEN</label>
            <input id="ingest-token" class="field-input" type="password" placeholder="token" required />

            <label class="field-label" for="guild-id">guildId</label>
            <input id="guild-id" class="field-input" type="text" placeholder="123456789012345678" required />

            <label class="field-label" for="author-name">authorName</label>
            <input id="author-name" class="field-input" type="text" placeholder="LiveChat Extension" />

            <label class="field-label" for="author-image">authorImage (avatar URL)</label>
            <input id="author-image" class="field-input" type="url" placeholder="https://cdn.discordapp.com/..." />

            <div class="actions-row">
              <button id="save-button" class="btn btn-primary" type="submit">Sauvegarder</button>
              <button id="test-button" class="btn btn-ghost" type="button">Tester la config</button>
            </div>
          </form>
        </section>

        <p id="options-status" class="status status-info hidden"></p>
      </section>
    </main>

    <script type="module" src="/src/options/options.ts"></script>
  </body>
</html>
