<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LiveChat Extension - Options</title>
  </head>
  <body>
    <main class="options-shell">
      <section class="options-card">
        <header class="options-header">
          <div class="brand-row">
            <img class="brand-logo" src="icon.png" alt="LiveChat" />
            <p class="options-kicker">LiveChat Extension</p>
          </div>
          <h1>Configuration</h1>
          <p class="options-subtitle">Renseigne d’abord API_URL, puis appaire avec `/pair-code`.</p>
        </header>

        <section class="api-card">
          <h2 class="section-title">1) Connexion API (obligatoire)</h2>
          <p class="section-subtitle">Utilise l’URL racine du bot, par exemple <code>https://bot.exemple.com</code>.</p>
          <label class="field-label" for="api-url">API_URL</label>
          <input id="api-url" class="field-input" type="url" placeholder="https://bot.exemple.com" />
          <p class="api-note">Ne pas mettre <code>/overlay</code> ou <code>/ingest</code> dans l’URL.</p>
          <p id="permission-state" class="permission-state">Autorisation domaine: non configuré.</p>
        </section>

        <form id="pairing-form" class="options-form">
          <section class="pairing-card">
            <h2 class="section-title">2) Appairage par code</h2>
            <p class="section-subtitle">Génère un code Discord avec <code>/pair-code</code>, puis colle-le ici.</p>

            <label class="field-label" for="pairing-code">Code unique</label>
            <input id="pairing-code" class="field-input" type="text" placeholder="AB12CD34" required />

            <label class="field-label" for="device-name">Nom de l’extension (optionnel)</label>
            <input id="device-name" class="field-input" type="text" placeholder="LiveChat Extension" />

            <button id="pair-button" class="btn btn-primary" type="submit">Récupérer la configuration</button>
          </section>
        </form>

        <form id="options-form" class="options-form">
          <h2 class="section-title">3) Configuration manuelle (optionnel)</h2>
          <p class="section-subtitle">Utile pour corriger/ajuster les valeurs après appairage.</p>
          <label class="field-label" for="ingest-token">INGEST_API_TOKEN</label>
          <input id="ingest-token" class="field-input" type="password" placeholder="token" required />

          <label class="field-label" for="guild-id">guildId</label>
          <input id="guild-id" class="field-input" type="text" placeholder="123456789012345678" required />

          <label class="field-label" for="author-name">authorName</label>
          <input id="author-name" class="field-input" type="text" placeholder="LiveChat Extension" />

          <label class="field-label" for="author-image">authorImage (avatar URL)</label>
          <input id="author-image" class="field-input" type="url" placeholder="https://cdn.discordapp.com/..." />

          <div class="actions-row">
            <button id="save-button" class="btn btn-primary" type="submit">Sauvegarder</button>
            <button id="test-button" class="btn btn-ghost" type="button">Tester la config</button>
          </div>
        </form>

        <p id="options-status" class="status status-info hidden"></p>
      </section>
    </main>

    <script type="module" src="/src/options/options.ts"></script>
  </body>
</html>
